@namespace HumanResources

@using HanyCo.Infra.Blazor
@using Library.Cqrs.Models.Queries
@using Library.Cqrs.Models.Commands
@using Microsoft.Extensions.Caching.Memory
@using Microsoft.AspNetCore.Components
@using HumanResources

@inject IQueryProcessor _queryProcessor
@inject ICommandProcessor _commandProcessor
@inject IMemoryCache _memoryCache
@inject NavigationManager _navigationManager

@inherits HanyCo.Infra.Blazor.ComponentBase<PersonDto, PersonViewModel>

<MessageComponent @ref="MessageComponent" />
<EditForm Model='@DataContext' OnValidSubmit='SaveButton_OnClick'>
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class='row'>
    </div>
    <div class='row'>
        <label id='IdLabel' name='IdLabel' class='col-2' disabled='disabled'>Id</label>
        <input id='IdNumericTextBox' name='IdNumericTextBox' class='col-5' type='number' disabled='disabled' @bind='this.DataContext.Id' />
    </div>
    <div class='row'>
        <label id='FirstNameLabel' name='FirstNameLabel' class='col-2'>First Name</label>
        <input id='FirstNameTextBox' name='FirstNameTextBox' class='col-5' type='text' @bind='this.DataContext.FirstName' />
    </div>
    <div class='row'>
        <label id='LastNameLabel' name='LastNameLabel' class='col-2'>Last Name</label>
        <InputText id='LastNameTextBox' name='LastNameTextBox' class='col-5' type='text' @bind-Value='DataContext.LastName' />
        <ValidationMessage For="@(() => DataContext.LastName)" Class="error-message" />
    </div>
    <div class='row'>
        <label id='DateOfBirthLabel' name='DateOfBirthLabel' class='col-2'>Date Of Birth</label>
        <input id='DateOfBirthDatePicker' name='DateOfBirthDatePicker' class='col-5' type='datetime-local' @bind='this.DataContext.DateOfBirth' />
    </div>
    <div class='row'>
        <label id='HeightLabel' name='HeightLabel' class='col-2'>Height</label>
        <input id='HeightNumericTextBox' name='HeightNumericTextBox' class='col-5' type='number' @bind='this.DataContext.Height' />
    </div>
    <div class='row'>
        <button name='SaveButton' type="submit" class='col-2 offset-2 btn btn-success'>Save</button>
        <button name='BackButton' type="button" class='col-2 offset-1 btn btn-success' @onclick='BackButton_OnClick'>Back</button>
    </div>
</EditForm>